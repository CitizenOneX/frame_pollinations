local a=require('data.min')local b=require('battery.min')local c=require('sprite.min')TEXT_FLAG=0x0a;IMAGE_FLAG=0x0d;function parse_text(a)local d={}d.data=a;return d end;a.parsers[IMAGE_FLAG]=c.parse_sprite;a.parsers[TEXT_FLAG]=parse_text;function print_text()local e=0;for f in a.app_data[TEXT_FLAG].data:gmatch("([^\n]*)\n?")do if f~=""then frame.display.text(f,1,e*60+1)e=e+1 end end end;function print_image()local g=a.app_data[IMAGE_FLAG]frame.display.bitmap(400,1,g.width,2^g.bpp,0,g.pixel_data)end;function app_loop()local h=0;while true do rc,err=pcall(function()local i=a.process_raw_items()frame.sleep(0.005)if i>0 then if a.app_data[TEXT_FLAG]~=nil and a.app_data[TEXT_FLAG].data~=nil then print_text()end;if a.app_data[IMAGE_FLAG]~=nil and a.app_data[IMAGE_FLAG].pixel_data~=nil then print_image()end;frame.display.show()end;frame.sleep(0.005)h=b.send_batt_if_elapsed(h,180)frame.sleep(0.1)end)if rc==false then print(err)frame.display.text(" ",1,1)frame.display.show()frame.sleep(0.04)break end end end;app_loop()